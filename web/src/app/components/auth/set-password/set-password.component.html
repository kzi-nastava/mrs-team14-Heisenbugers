<div class="min-h-screen bg-white">
  <div class="flex min-h-screen items-start justify-center">
    <div class="w-full max-w-130 px-6 pt-17.5">
      <h1 class="text-center text-[34px] font-extrabold text-black mb-13.75">Set password</h1>

      <form [formGroup]="form" (ngSubmit)="submit()" class="mx-auto w-full max-w-82.5 space-y-5">

        <div>
          <label class="block text-[12px] text-neutral-300 mb-1.5">Password</label>
          <div class="relative">
            <input
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              class="w-full h-10 rounded-[10px] border border-neutral-200 bg-white px-4 pr-14 shadow-sm focus:outline-none focus:ring-4 focus:ring-lime-200"
              [class.border-neutral-200]="!isInvalid('password')"
              [class.focus:ring-lime-200]="!isInvalid('password')"
              [class.border-red-400]="isInvalid('password')"
              [class.focus:ring-red-200]="isInvalid('password')"
            />

            <button
              type="button"
              (click)="togglePassword()"
              class="absolute right-3 top-3/4 -translate-y-3/4 cursor-pointer text-neutral-400 hover:text-black"
              [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'"
            >
              @if (showPassword) {
                <ng-icon name="bootstrapEye" size="20"> </ng-icon>
              } @else {
                <ng-icon name="bootstrapEyeSlash" size="20"> </ng-icon>
              }
            </button>
          </div>

          @if (isInvalid('password') && f.password.hasError('required')) {
            <p class="mt-1 text-xs text-red-500">Required</p>
          } @if (isInvalid('password') && f.password.hasError('minlength')) {
          <p class="mt-1 text-xs text-red-500">Min 6 chars</p>
        }
        </div>

        <div>
          <label class="block text-[12px] text-neutral-300 mb-1.5">Confirm password</label>
          <div class="relative">
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              formControlName="confirmPassword"
              class="w-full h-9.5 rounded-[10px] border border-neutral-200 bg-white px-4 pr-12 shadow-sm focus:outline-none focus:ring-4 focus:ring-lime-200"
              [class.border-neutral-200]="!(isInvalid('confirmPassword') || mismatchActive)"
              [class.focus:ring-lime-200]="!(isInvalid('confirmPassword') || mismatchActive)"
              [class.border-red-400]="isInvalid('confirmPassword') || mismatchActive"
              [class.focus:ring-red-200]="isInvalid('confirmPassword') || mismatchActive"
            />
            <button
              type="button"
              (click)="toggleConfirmPassword()"
              class="absolute right-3 top-3/4 -translate-y-3/4 cursor-pointer text-neutral-400"
              [attr.aria-label]="showConfirmPassword ? 'Hide password' : 'Show password'"
            >
              @if (showConfirmPassword) {
                <ng-icon name="bootstrapEye" size="20"> </ng-icon>
              } @else {
                <ng-icon name="bootstrapEyeSlash" size="20"> </ng-icon>
              }
            </button>
          </div>

          @if (f.confirmPassword.touched && f.confirmPassword.hasError('required')) {
            <p class="mt-1 text-xs text-red-500">Required</p>
          } @if (passwordMismatch) {
          <p class="mt-1 text-xs text-red-500">Passwords do not match</p>
        }
        </div>

        <div class="pt-27.5">
          <button
            type="submit"
            class="mx-auto block h-10.5 w-47.5 rounded-[10px] bg-lime-300 text-black font-semibold shadow hover:bg-lime-200 active:scale-[0.99]"
          >
            Save
          </button>

          @if (submitted) {
            <div
              class="mt-3 rounded-md border border-lime-200 bg-lime-50 p-3 text-sm text-neutral-700"
            >
              Password set
            </div>
          }
        </div>
      </form>
    </div>
  </div>
</div>
