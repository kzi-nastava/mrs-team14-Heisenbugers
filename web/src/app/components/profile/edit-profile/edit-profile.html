<form [formGroup]="form" (ngSubmit)="submit()">
  <h2 class="text-3xl font-bold">
    Edit Personal Information
  </h2>
  <p class="mt-3 text-gray-600">
    Update your personal information such as name, email, address, and phone number.
  </p>
  <div class="flex flex-row gap-6">
    <div class="mt-6 grid grid-cols-2 gap-6">
      <div>
        <label class="block text-[12px] text-neutral-300 mb-2.5">Name</label>
        <input
          type="text"
          formControlName="name"
          class="w-full min-w-100 h-10 rounded-[10px] border border-neutral-200 bg-white px-3 shadow-sm focus:outline-none focus:ring-4 focus:ring-lime-200"
          [class.border-neutral-200]="!isInvalid('name')"
          [class.focus:ring-lime-200]="!isInvalid('name')"
          [class.border-red-400]="isInvalid('name')"
          [class.focus:ring-red-200]="isInvalid('name')"
        />
        @if (f.name.touched && f.name.hasError('required')) {
          <p class="mt-1 text-xs text-red-500">Required</p>
        }
      </div>
      <div>
        <label class="block text-[12px] text-neutral-300 mb-2.5">Email</label>
        <input
          type="email"
          formControlName="email"
          class="w-full h-10 rounded-[10px] border border-neutral-200 bg-white px-3 shadow-sm
             focus:outline-none focus:ring-4 focus:ring-lime-200"
          [class.border-neutral-200]="!isInvalid('email')"
          [class.focus:ring-lime-200]="!isInvalid('email')"
          [class.border-red-400]="isInvalid('email')"
          [class.focus:ring-red-200]="isInvalid('email')"
        />
        @if (f.email.touched && f.email.hasError('required')) {
          <p class="mt-1 text-xs text-red-500">Required</p>
        }
        @if (f.email.touched && f.email.hasError('email')) {
          <p class="mt-1 text-xs text-red-500">Invalid email</p>
        }
      </div>
      <div>
        <label class="block text-[12px] text-neutral-300 mb-2.5">Address</label>
        <input
          type="text"
          formControlName="address"
          class="w-full h-10 rounded-[10px] border border-neutral-200 bg-white px-3 shadow-sm
             focus:outline-none focus:ring-4 focus:ring-lime-200"
          [class.border-neutral-200]="!isInvalid('address')"
          [class.focus:ring-lime-200]="!isInvalid('address')"
          [class.border-red-400]="isInvalid('address')"
          [class.focus:ring-red-200]="isInvalid('address')"
        />
        @if (f.address.touched && f.address.hasError('required')) {
          <p class="mt-1 text-xs text-red-500">Required</p>
        }
      </div>
      <div>
        <label class="block text-[12px] text-neutral-300 mb-2.5">Phone number</label>
        <input
          type="number"
          formControlName="phoneNumber"
          class="w-full h-10 rounded-[10px] border border-neutral-200 bg-white px-3 shadow-sm
             focus:outline-none focus:ring-4 focus:ring-lime-200"
          [class.border-neutral-200]="!isInvalid('phoneNumber')"
          [class.focus:ring-lime-200]="!isInvalid('phoneNumber')"
          [class.border-red-400]="isInvalid('phoneNumber')"
          [class.focus:ring-red-200]="isInvalid('phoneNumber')"
        />
        @if (f.phoneNumber.touched && f.phoneNumber.hasError('required')) {
          <p class="mt-1 text-xs text-red-500">
            Required
          </p>
        }
        @if (f.phoneNumber.touched && f.phoneNumber.hasError('pattern')) {
          <p class="mt-1 text-xs text-red-500">
            Invalid phone format
          </p>
        }
      </div>
    </div>
    <div class="flex justify-center mt-11">
      <label class="w-45 h-35 max-w-180 aspect-4/3 rounded-2xl bg-neutral-200
                      flex items-center justify-center cursor-pointer relative overflow-hidden">
        <input type="file" accept="image/*" class="hidden" (change)="onPickImage($event)" />

        @if (imagePreview) {
          <img
            [src]="imagePreview"
            alt="Profile preview"
            class="absolute inset-0 w-full h-full object-fit" />
        } @else {
          <div class="flex flex-col items-center text-neutral-500">
            <ng-icon name="bootstrapCameraFill" size="75"></ng-icon>
            <div class="mt-2 text-xs">Change profile photo</div>
          </div>
        }
      </label>
    </div>
  </div>
  <div class="mt-10 flex gap-4">
    <button (click)="cancel()" class="h-10.5 w-32 cursor-pointer rounded-[10px] bg-gray-300 text-black font-semibold shadow
                 hover:bg-gray-200 active:scale-[0.99]">
      Cancel
    </button>
    <button type="submit" class="h-10.5 w-32 rounded-[10px] bg-[#C5E55D] cursor-pointer text-black font-semibold shadow hover:bg-lime-200 active:scale-[0.99]">
      Save Changes
    </button>
  </div>
  @if (submitted) {
    <div class="mt-3 rounded-md border border-lime-200 bg-lime-50 p-3 text-sm text-neutral-700">
      Personal Information updated successfully.
    </div>
  }
</form>
